<!DOCTYPE html>
<html>
  <head>
  
    <title>JavaScript Assets in Rails</title>
  
  
  <meta name="description" content="This is a dangerous site.">

  <link href="/images/TCB_Favicon.png" rel="icon">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Raleway:200" rel="stylesheet">
  <link rel="stylesheet" href="/fonts/fontawesome-free-5.0.6/on-server/css/fontawesome-all.css">
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <script src="/js/gallery.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      activateGallery();
    });
  </script>
</head>

  <body>
    <header class="header">
  <nav>
    <input type="checkbox" id="mobile-menu" class="mobile-menu-check">
    <label for="mobile-menu" class="show-mobile-menu">Menu</label>
    <ul class="header-nav nav nav-links">
      <li><a href="/">Home</a></li>
<li><a href="/gallery">Gallery</a></li>
<li class="dropdown">
  <a class="drop-trigger" href="/blog">Blog</a>
  <ul class="drop-menu">
    <li>Recent Posts</li>
    
      <li><a href="/2018/07/06/javascript-assets.html">JavaScript Assets in Rails</a></li>
    
      <li><a href="/2018/02/24/title-of-second-post.html">So it begins...</a></li>
    
  </ul>
</li>
<li><a href="/2018/07/06/javascript-assets.html">Newest Post</a></li>

    </ul>
  </nav>
  <a href="/" class="header-logo">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1000 285" style="enable-background:new 0 0 1000 285;" xml:space="preserve">

<g>
	<g>
		<path class="st0" d="M64.4,285H0V2.4h64.4v29.1H35.8v224.7h28.5V285z"/>
		<path class="st0" d="M232.8,50.6l-8.7,31.6h-49.8V235H136V82.2H82V50.6H232.8z"/>
		<path class="st0" d="M401.8,219.1c-20.1,12.5-41,18.7-62.7,18.7c-29.3,0-52.5-9-69.7-27.1c-16.4-17.2-24.6-39.2-24.6-66
			c0-27.2,9.2-49.8,27.7-67.7c19.2-18.8,44.2-28.3,75-28.3c19.6,0,35.6,3.3,48.1,9.8l-0.6,34.1c-14.4-8.6-29.8-12.9-46.2-12.9
			c-20.3,0-36.1,6.3-47.3,19c-10.1,11.4-15.1,25.7-15.1,43.1c0,18.1,5.4,33.1,16.2,45.1c10.8,11.9,25.1,17.9,42.8,17.9
			c15.5,0,30.8-4.2,45.9-12.6L401.8,219.1z"/>
		<path class="st0" d="M561.9,179.3c0,14.7-5.2,27.3-15.7,37.8C534.1,229,517.5,235,496.4,235h-62.7V50.6h61
			c17.3,0,31.1,4.9,41.1,14.6c9.1,8.8,13.7,19.3,13.7,31.6c0,17.3-7.3,29.8-21.8,37.5v0.3c10.4,2.8,18.7,8.3,24.9,16.4
			C558.8,159,561.9,168.5,561.9,179.3z M511.8,103.9c0-14.5-8.5-21.7-25.5-21.7h-14.3v43.7h18.7c5.6,0,10.5-2.1,14.7-6.3
			C509.7,115.3,511.8,110.1,511.8,103.9z M523.6,179.2c0-14.5-10.1-21.7-30.4-21.7h-21.1v45.9h19.7
			C513,203.4,523.6,195.3,523.6,179.2z"/>
		<path class="st0" d="M647.8,285h-64.4v-28.8H612V31.5h-28.5V2.4h64.4V285z"/>
		<path class="st0" d="M821.8,163.3c0,13.2-4.6,24.4-13.9,33.4c-9.2,9.1-21.2,14.8-36,17.2v29.7h-26.9v-29.4
			c-15.1-1.7-29.4-6.8-42.8-15.4l14.8-27.4c14,9,27,13.4,39.2,13.4c17.5,0,26.3-5.7,26.3-17.1c0-7.6-7.9-15.6-23.8-23.8
			c-20.3-10.4-33.5-19-39.5-25.7c-7.7-9-11.5-20-11.5-33c0-10.8,3.7-20.5,11.2-29.1c8.2-9.1,19-14.9,32.5-17.3v-28h27.1v27.1
			c12.9,1.3,24.1,4.6,33.6,9.8l-0.8,31.6c-16.2-8.6-30.7-12.9-43.4-12.9c-14.2,0-21.3,5.1-21.3,15.4c0,7.5,6.4,14.6,19.3,21.5
			c20.9,11.2,32.9,18.1,36.1,20.7C815.3,134.6,821.8,147.6,821.8,163.3z"/>
	</g>
	<g>
		<rect x="872.8" class="st1" width="127.2" height="283.2"/>
	</g>
</g>
</svg>

  </a>
</header>

    <div class="content-container">
      <div class="post">
  <div class="half-hero" style="background-image:url(/images/Background.png)"></div>

  <article class="page">
    <header class="post-header">
      <h1>JavaScript Assets in Rails</h2>
      <div class="post-byline">
        <img src="https://www.gravatar.com/avatar/57d16d81be9c66bf3381299cbc62613b?s=200">
        <a href="" class="social-link"><i class="fab fa-twitter"></i></a>
        by: Thomas Callum Brook
        <span> - July 06, 2018</span>
      </div>
    </header>
    <aside class="post-aside">
      <h4>Recent Posts</h4>
<ul class="blog-title-list">
  
    <li>
      <a href="/2018/07/06/javascript-assets.html">JavaScript Assets in Rails</a>
      <span>Posted: July 06, 2018</span>
    </li>
  
    <li>
      <a href="/2018/02/24/title-of-second-post.html">So it begins...</a>
      <span>Posted: February 24, 2018</span>
    </li>
  
</ul>

    </aside>
    <div class="post-content">
      <p>It’s been forever since I’ve posted, so I thought I’d start a theme. Whenever I solve a mini problem I’ve experienced in my new web dev career, I’ll make a mini post about it. The title will be the problem, and the post my solution. This will serve as a reminder to myself how I fixed the issue, should I encounter it again and also as a possible helping hand to others in future should I make the blog more far reaching.</p>

<p><strong><em>JavaScript Assets:</em></strong></p>

<p>In Rails, the asset pipeline precompiles all your JS and CSS into neatly processed and minified files and should be the main way of encorporating any new scripts.</p>

<p>When I start adding some simple JS, I usually begin by inserting it into the relevant page within the normal <strong>’&lt;script&gt;‘</strong> tags. It’s the quick and dirty method when your first testing whether the code is doing as expected, and requires no big picture thinking for your app.</p>

<p>Once I had pieced together the code I wanted for a couple of different pages however, I was ready to move it to the pipeline: here begins the issue.</p>

<p>The default asset pipeline config is great for generic code which isn’t page specific, and doesn’t rely on specific data or DOM elements in order to excute correctly. It all gets loaded in by application.js under the simple line <strong>’//= require_tree .’</strong></p>

<p>What happens if you don’t want each file to be loaded in on each page though? In my example the page specfic JS would raise an error searching for non-existant DOM elements on incorrect pages. At this point the remaining JS won’t be executed and a very boring web page provided solely by the HTML template is all that is displayed.</p>

<p><strong>SOLUTION:</strong></p>

<p>Some quick googling revealed that:</p>

<ul>
  <li>
    <p>Removal of require tree line in application.js (ensuring all other necessary js files are still listed).</p>
  </li>
  <li>
    <p>Including each page specific js file via <strong>&lt;%= javascript_include_tag “&lt;js-file&gt;” %&gt;</strong> in the relevant view html.erb file.</p>
  </li>
  <li>
    <p>Adding the line <strong>‘Rails.application.config.assets.precompile += %w( &lt;js-file.js&gt; &lt;js-file2.js&gt; )’</strong> to config/initializers/assets.rb.</p>
  </li>
</ul>

<p>Allows my js files to still be precompiled in production, whilst ensuring they are only used on the required page.</p>

<p>All in all, a quick fix :)</p>

<p><em>Tom</em></p>

    </div>
    <footer class="post-footer">
      
    </footer>
  </article>
</div>

    </div>
    <footer class="footer">
  <a class="footer-logo" href="/">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1000 285" style="enable-background:new 0 0 1000 285;" xml:space="preserve">

<g>
	<g>
		<path class="st0" d="M64.4,285H0V2.4h64.4v29.1H35.8v224.7h28.5V285z"/>
		<path class="st0" d="M232.8,50.6l-8.7,31.6h-49.8V235H136V82.2H82V50.6H232.8z"/>
		<path class="st0" d="M401.8,219.1c-20.1,12.5-41,18.7-62.7,18.7c-29.3,0-52.5-9-69.7-27.1c-16.4-17.2-24.6-39.2-24.6-66
			c0-27.2,9.2-49.8,27.7-67.7c19.2-18.8,44.2-28.3,75-28.3c19.6,0,35.6,3.3,48.1,9.8l-0.6,34.1c-14.4-8.6-29.8-12.9-46.2-12.9
			c-20.3,0-36.1,6.3-47.3,19c-10.1,11.4-15.1,25.7-15.1,43.1c0,18.1,5.4,33.1,16.2,45.1c10.8,11.9,25.1,17.9,42.8,17.9
			c15.5,0,30.8-4.2,45.9-12.6L401.8,219.1z"/>
		<path class="st0" d="M561.9,179.3c0,14.7-5.2,27.3-15.7,37.8C534.1,229,517.5,235,496.4,235h-62.7V50.6h61
			c17.3,0,31.1,4.9,41.1,14.6c9.1,8.8,13.7,19.3,13.7,31.6c0,17.3-7.3,29.8-21.8,37.5v0.3c10.4,2.8,18.7,8.3,24.9,16.4
			C558.8,159,561.9,168.5,561.9,179.3z M511.8,103.9c0-14.5-8.5-21.7-25.5-21.7h-14.3v43.7h18.7c5.6,0,10.5-2.1,14.7-6.3
			C509.7,115.3,511.8,110.1,511.8,103.9z M523.6,179.2c0-14.5-10.1-21.7-30.4-21.7h-21.1v45.9h19.7
			C513,203.4,523.6,195.3,523.6,179.2z"/>
		<path class="st0" d="M647.8,285h-64.4v-28.8H612V31.5h-28.5V2.4h64.4V285z"/>
		<path class="st0" d="M821.8,163.3c0,13.2-4.6,24.4-13.9,33.4c-9.2,9.1-21.2,14.8-36,17.2v29.7h-26.9v-29.4
			c-15.1-1.7-29.4-6.8-42.8-15.4l14.8-27.4c14,9,27,13.4,39.2,13.4c17.5,0,26.3-5.7,26.3-17.1c0-7.6-7.9-15.6-23.8-23.8
			c-20.3-10.4-33.5-19-39.5-25.7c-7.7-9-11.5-20-11.5-33c0-10.8,3.7-20.5,11.2-29.1c8.2-9.1,19-14.9,32.5-17.3v-28h27.1v27.1
			c12.9,1.3,24.1,4.6,33.6,9.8l-0.8,31.6c-16.2-8.6-30.7-12.9-43.4-12.9c-14.2,0-21.3,5.1-21.3,15.4c0,7.5,6.4,14.6,19.3,21.5
			c20.9,11.2,32.9,18.1,36.1,20.7C815.3,134.6,821.8,147.6,821.8,163.3z"/>
	</g>
	<g>
		<rect x="872.8" class="st1" width="127.2" height="283.2"/>
	</g>
</g>
</svg>

  </a>
  <nav>
    <ul class="footer-nav nav-links">
      <li><a href="/">Home</a></li>
<li><a href="/gallery">Gallery</a></li>
<li class="dropdown">
  <a class="drop-trigger" href="/blog">Blog</a>
  <ul class="drop-menu">
    <li>Recent Posts</li>
    
      <li><a href="/2018/07/06/javascript-assets.html">JavaScript Assets in Rails</a></li>
    
      <li><a href="/2018/02/24/title-of-second-post.html">So it begins...</a></li>
    
  </ul>
</li>
<li><a href="/2018/07/06/javascript-assets.html">Newest Post</a></li>

    </ul>
  </nav>
  <ul class="social-list">
    <li>
  <a href="https://www.facebook.com/tom.brook.180" class="social-link">
    <i class="fab fa-facebook-f"></i>
  </a>
</li>
<li>
  <a href="https://twitter.com/Thomas_C_Brook" class="social-link">
    <i class="fab fa-twitter"></i>
  </a>
</li>
<li>
  <a href="https://github.com/ThomasCallumBrook" class="social-link">
    <i class="fab fa-github"></i>
  </a>
</li>

  </ul>
</footer>

  </body>
</html>
